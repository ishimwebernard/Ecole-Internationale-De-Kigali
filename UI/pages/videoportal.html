<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="../css/videoportal.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Portal</title>
</head>
<body>
    <div class="content">
        <div class="row1">
            <img src="../assets/images/schoollogo.png" alt="">
            <h1>Video Portal</h1>
            <button onclick="location.href=`../index.html`">Back</button>
        </div>
        <div class="mainContainer">
            <div class="principle" id="principle">
                <video id="video-element" controls>
                    <source src="https://firebasestorage.googleapis.com/v0/b/ecole-internationale-dekigli.appspot.com/o/EIK%20Summary.mp4?alt=media&token=af133303-101c-4865-8f38-1d994a3eed33" id="videoSourceHolder" type="video/mp4">
                </video>
                <h1 id="videoTitle">Title</h1>
                <p id="videoSubtitle">Subtitle</p>
                <div class="advert">
                    <img class="gif" src="../assets/gifs/g1.gif" alt="">
                    <img class="gif" src="../assets/gifs/g2.gif" alt="">

                </div>
                <div class="schoolDescription">
                    <h1>Ecole Internationale de Kigali</h1>
               
                        <h2>Vision</h2><br>
                        <p>The EIK's vision is to be a platform for awakening, expression and fulfillment
                            talent of young people, allowing them to develop a Rwandan identity thus
                            than to conquer their place as citizens of the world, useful to themselves, to their country
                            and to the world.<br><br></p>
                                 
                    <h2>Mission</h2>
                    <p>Participate in the objectives of National Education which is to educate children
                        Rwandans and those residing in Rwanda;<br>
                        - Provide excellent training aimed at inclusive, equitable and
                        innovative;<br><br>
                        - Provide our students with an adequate framework promoting inspiration, concentration
                        allowing better friendly learning<br><br></p>
                            <h2>Objective</h2><br>
                    <p>Enable students to achieve optimal education at the nursery and primary level. Therefore having a number of students not exceeding 30 per class;<br>

                        Following the program of the Ministry of Education enriched by other inputs leading to openness to the world and train trilingual students speaking Kinyarwanda, English and French.<br>
                        
                        Relieve working mothers and protect their children from domestic violence, especially young girls;<br></p><br>
                        <h2>Realization</h2>
                        <p>Twenty-three years after the opening of the nursery and primary section of the Kigali International School, 18 intakes have consecutively enrolled with a total enrolment of 1027 students. Many of them already hold important positions, both nationally and internationally.<br><br>

                            The school operates in its own modern and well-equipped buildings, with a capacity of 1,000 students.<br><br>
                            
                            The E.I.K. maintains a good collaboration with the local authorities through the generosity activities supported by the school and the parents of our students, in particular helping the survivors of the genocide, the sick in the hospitals of the place, offering health insurance (mutual health) for the indigent in our administrative sector.<br><br>
                            
                            Contribute to the reduction of unemployment by creating jobs especially for women etc.</p>
                            
                </div>
            </div>
            <div class="row2" id="row2">
                <!-- <div class="triple">
                    <div class="video">
                        <div class="thumbnail"></div>
                        <h3 class="h3">Title</h3>
                        <p>Subtitle</p>
                    
                </div>
                <div class="video">
                    <div class="thumbnail"></div>
                    <h3 class="h3">Title</h3>
                    <p>Subtitle</p>
                
            </div>
            <div class="video">
                <div class="thumbnail"></div>
                <h3 class="h3">Title</h3>
                <p>Subtitle</p>
            
        </div>
                
            </div> -->
            <div class="triple" id="lastVideoRow">
    
            </div>
        </div><!-- The core Firebase JS SDK is always required and must be listed first -->
        </div>
      
      
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase.js"></script>
    
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>
    
    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyBv1oabmJqKKc-iTg422Wx-VAmiN3W14MU",
        authDomain: "eikvideos-95aae.firebaseapp.com",
        projectId: "eikvideos-95aae",
        storageBucket: "eikvideos-95aae.appspot.com",
        messagingSenderId: "504666334221",
        appId: "1:504666334221:web:5fcadefaedf6b0e62ea144",
        measurementId: "G-JQ63B4NHN5"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
      var _ALL_VIDEOS = [];
      var row2 = document.getElementById('row2');

      getAllVideos();

     async function getAllVideos(){
          await firebase.firestore().collection('video').get().then((snapShot)=>{
              _ALL_VIDEOS = snapShot.docs.map(doc => doc.data());
          }); 
          _POPULATE_VIDEOS();  
        }


        function _POPULATE_VIDEOS(){
            var _VIDEO_CUBITS = _ALL_VIDEOS.length;
            var clusters = _VIDEO_CUBITS-(_VIDEO_CUBITS%3);

            console.log(_VIDEO_CUBITS);
            console.log(_ALL_VIDEOS);

            if(clusters>=3){
                for(let _VIDEO=0; _VIDEO<clusters;_VIDEO+=3){

                    row2.innerHTML += `
                    <div class="triple">
                    <div class="video" onclick="playVideo('${_ALL_VIDEOS[_VIDEO].videourl}'),'${_ALL_VIDEOS[_VIDEO].title}','${_ALL_VIDEOS[_VIDEO].description}'">
                    <img src="${_ALL_VIDEOS[_VIDEO].bitmap}" class="thumbnail">
                    <h3 class="h3">${_ALL_VIDEOS[_VIDEO].title}</h3>
                    <p>${_ALL_VIDEOS[_VIDEO].description}</p>

                    </div>
                    <div class="video" onclick="playVideo('${_ALL_VIDEOS[_VIDEO+1].videourl}','${_ALL_VIDEOS[_VIDEO+1].title}','${_ALL_VIDEOS[_VIDEO+1].description}')">
                    <img src="${_ALL_VIDEOS[_VIDEO+1].bitmap}" class="thumbnail">
                    <h3 class="h3">${_ALL_VIDEOS[_VIDEO+1].title}</h3>
                    <p>${_ALL_VIDEOS[_VIDEO+1].description}</p>

                    </div>
                    <div class="video" onclick="playVideo('${_ALL_VIDEOS[_VIDEO+2].videourl}','${_ALL_VIDEOS[_VIDEO+2].title}','${_ALL_VIDEOS[_VIDEO+2].description}')">
                    <img src="${_ALL_VIDEOS[_VIDEO+2].bitmap}" class="thumbnail">
                    <h3 class="h3">${_ALL_VIDEOS[_VIDEO+2].title}</h3>
                    <p>${_ALL_VIDEOS[_VIDEO+2].description}</p>

                    </div>

                    </div>`;


            }
            showRemaining(_VIDEO_CUBITS%3);
            }else{
                showRemaining(_VIDEO_CUBITS);
            }

           
        }

        function showRemaining(n){
            var length = _ALL_VIDEOS.length;
            let finishedOnes = length-n;
            for(let _VIDEO=length-n-1;_VIDEO<length;_VIDEO++){
                document.getElementById('lastVideoRow').innerHTML+=`
                <div class="video" onclick="playVideo('${_ALL_VIDEOS[_VIDEO].videourl}','${_ALL_VIDEOS[_VIDEO].title}','${_ALL_VIDEOS[_VIDEO].description}')">
                    <img src="${_ALL_VIDEOS[_VIDEO].bitmap}" class="thumbnail">
                    <h3 class="h3">${_ALL_VIDEOS[_VIDEO].title}</h3>
                    <p>${_ALL_VIDEOS[_VIDEO].description}</p>

                    </div>
                `;
            }
           
        }

        
        function playVideo(url,title,subtitle){
            var videoSourceHolder = document.getElementById('videoSourceHolder');
            var videoElement = document.getElementById('video-element');
            var principle = document.getElementById('principle');
            var videoTitle = document.getElementById('videoTitle');
            var videoSubtitle = document.getElementById('videoSubtitle');

            videoSourceHolder.setAttribute('src',url);
            videoElement.load();
            videoElement.play();
            principle.scrollIntoView({behavior: "smooth", block: "end"});
            videoTitle.innerText = title;
            videoSubtitle.innerText = subtitle;

        }
    </script>
</body>
</html>